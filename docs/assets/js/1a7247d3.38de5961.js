"use strict";(self.webpackChunkdevwks_2845_client=self.webpackChunkdevwks_2845_client||[]).push([[400],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=a.createContext({}),d=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(p.Provider,{value:t},e.children)},s="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),s=d(n),m=o,h=s["".concat(p,".").concat(m)]||s[m]||u[m]||r;return n?a.createElement(h,i(i({ref:t},c),{},{components:n})):a.createElement(h,i({ref:t},c))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[s]="string"==typeof e?e:o,i[1]=l;for(var d=2;d<r;d++)i[d]=n[d];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7226:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var a=n(7462),o=(n(7294),n(3905));const r={sidebar_position:2},i="Function Code Setup",l={unversionedId:"appendix/lambda-docs/code-setup",id:"appendix/lambda-docs/code-setup",title:"Function Code Setup",description:"After the lambda function has been created it should take you to a page that is similar to the below image:",source:"@site/docs/appendix/lambda-docs/02-code-setup.mdx",sourceDirName:"appendix/lambda-docs",slug:"/appendix/lambda-docs/code-setup",permalink:"/DEVWKS-2845/appendix/lambda-docs/code-setup",draft:!1,editUrl:"https://cisco.com/docs/appendix/lambda-docs/02-code-setup.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Create the Lambda Function",permalink:"/DEVWKS-2845/appendix/lambda-docs/create-lambda"},next:{title:"Functions Explanation",permalink:"/DEVWKS-2845/appendix/lambda-docs/function-explanation"}},p={},d=[{value:"Create environment variable",id:"create-environment-variable",level:2},{value:"Change the Function Timeout",id:"change-the-function-timeout",level:2},{value:"Local code setup",id:"local-code-setup",level:2}],c={toc:d},s="wrapper";function u(e){let{components:t,...r}=e;return(0,o.kt)(s,(0,a.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"function-code-setup"},"Function Code Setup"),(0,o.kt)("p",null,"After the lambda function has been created it should take you to a page that is similar to the below image:\n",(0,o.kt)("img",{alt:"Created Function",src:n(6486).Z,width:"1866",height:"1118"})),(0,o.kt)("p",null,"For our code to work later on in this workshop, we need to create an environment variable from the Meraki API key we obtained earlier in this workshop. This should have been generated in Meraki Dashboard earlier."),(0,o.kt)("h2",{id:"create-environment-variable"},"Create environment variable"),(0,o.kt)("p",null,"To create our environment variable, we need to select the ",(0,o.kt)("strong",{parentName:"p"},"Configuration")," tab underneath ",(0,o.kt)("strong",{parentName:"p"},"Function overview"),". After doing this, there will be an ",(0,o.kt)("strong",{parentName:"p"},"Environment variables")," tab on the left side. It should look similar to this image:\n",(0,o.kt)("img",{alt:"Environment tab",src:n(2649).Z,width:"2056",height:"840"})),(0,o.kt)("p",null,"Select the ",(0,o.kt)("strong",{parentName:"p"},"Environment variables")," tab and then ",(0,o.kt)("strong",{parentName:"p"},"Edit")," it. Click on ",(0,o.kt)("strong",{parentName:"p"},"Add environment variable"),"."),(0,o.kt)("p",null,"Name the ",(0,o.kt)("inlineCode",{parentName:"p"},"key")," ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"strong"},"XCiscoMerakiAPIKey")),"."),(0,o.kt)("p",null,"Then enter your Meraki API key as the ",(0,o.kt)("inlineCode",{parentName:"p"},"Value"),"."),(0,o.kt)("p",null,"Then ",(0,o.kt)("strong",{parentName:"p"},"Save")," the configuration on the bottom right. It will look similar to this image except your ",(0,o.kt)("inlineCode",{parentName:"p"},"Value")," will have something there:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Environment variable",src:n(1037).Z,width:"1728",height:"948"})),(0,o.kt)("h2",{id:"change-the-function-timeout"},"Change the Function Timeout"),(0,o.kt)("p",null,"While in the ",(0,o.kt)("strong",{parentName:"p"},"Configuration")," section, we need to update the ",(0,o.kt)("strong",{parentName:"p"},"General configuration")," tab. Click on the ",(0,o.kt)("strong",{parentName:"p"},"General configuration")," tab and then click on ",(0,o.kt)("strong",{parentName:"p"},"Edit")," on the right side. Scroll down to the ",(0,o.kt)("strong",{parentName:"p"},"Timeout")," field and change it to ",(0,o.kt)("inlineCode",{parentName:"p"},"60")," seconds. It will look like the below image:\n",(0,o.kt)("img",{alt:"timeout",src:n(905).Z,width:"870",height:"436"})),(0,o.kt)("p",null,"Then ",(0,o.kt)("strong",{parentName:"p"},"Save")," this function."),(0,o.kt)("p",null,"Let's finish the local code setup now."),(0,o.kt)("h2",{id:"local-code-setup"},"Local code setup"),(0,o.kt)("p",null,"There are a few ways to code a Lambda function. Of the options listed below, we will use the Zip archive deployment:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Lambda Code Source Editor"),(0,o.kt)("li",{parentName:"ul"},"Containerized Deployment"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Zip archive deployment"))),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"The ",(0,o.kt)("inlineCode",{parentName:"p"},"Lambda Code Source Editor")," has some limitations. If you require additional libraries that are not provided by AWS, then using a ",(0,o.kt)("inlineCode",{parentName:"p"},"Containerized")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"Zip")," deployment will allow use of those libraries.")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"Zip")," option requires that we create a local folder for our code."),(0,o.kt)("p",null,"On your computer please create a new folder named ",(0,o.kt)("strong",{parentName:"p"},"shutdownPort")," using your preferred method (CLI or GUI)."),(0,o.kt)("p",null,"Open this folder in Visual Studio Code. Select ",(0,o.kt)("inlineCode",{parentName:"p"},"File")," on the top left of the editor, then click on ",(0,o.kt)("inlineCode",{parentName:"p"},"Open...")," from the dropdown menu. Find the ",(0,o.kt)("inlineCode",{parentName:"p"},"shutdownPort")," directory and select it. Then click on ",(0,o.kt)("inlineCode",{parentName:"p"},"Open"),"."),(0,o.kt)("p",null,"Back in the AWS Lambda function, select the ",(0,o.kt)("strong",{parentName:"p"},"Code")," tab underneath ",(0,o.kt)("strong",{parentName:"p"},"Function overview"),". Then copy the code from the ",(0,o.kt)("strong",{parentName:"p"},"Code Source")," editor. Here is an example of where it is:\n",(0,o.kt)("img",{alt:"Code Source Editor",src:n(4430).Z,width:"1534",height:"850"})),(0,o.kt)("p",null,"In the local code editor, create a new file called ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"strong"},"lambda_function.py"))," and paste the code from the Lambda function into it."),(0,o.kt)("p",null,"There should now be a file with the below code in the ",(0,o.kt)("inlineCode",{parentName:"p"},"shutdownPort")," folder."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="lambda_function.py" showLineNumbers',title:'"lambda_function.py"',showLineNumbers:!0},"import json\n\ndef lambda_handler(event, context):\n    # TODO implement\n    return {\n        'statusCode': 200,\n        'body': json.dumps('Hello from Lambda!')\n    }\n")))}u.isMDXComponent=!0},4430:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/code-source-editor-aa1f2676d3d1cc5bd8529c7f47a2fd49.png"},6486:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/created-function-264925d8acc414e53ecb463e86bacc1b.png"},1037:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/edit-environ-c9614f2bf01a3fcdf6502b9c2240eb64.png"},2649:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/env-tab-f0f72a7cdd3408ab225f4dfb1a1b1135.png"},905:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/timeout-95863cb45c7056b859013f0522a4ffbd.png"}}]);