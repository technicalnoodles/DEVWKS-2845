"use strict";(self.webpackChunklambda_docs=self.webpackChunklambda_docs||[]).push([[533],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>b});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var d=a.createContext({}),c=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(d.Provider,{value:t},e.children)},s="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,d=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),s=c(n),m=o,b=s["".concat(d,".").concat(m)]||s[m]||u[m]||r;return n?a.createElement(b,i(i({ref:t},p),{},{components:n})):a.createElement(b,i({ref:t},p))}));function b(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l[s]="string"==typeof e?e:o,i[1]=l;for(var c=2;c<r;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4967:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>s,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var a=n(7462),o=(n(7294),n(3905));const r={sidebar_position:2},i="Function Code Setup",l={unversionedId:"lambda-docs/code-setup",id:"lambda-docs/code-setup",title:"Function Code Setup",description:"After the lambda function has been created it should take you to a page that is similar to the below image:",source:"@site/docs/lambda-docs/code-setup.mdx",sourceDirName:"lambda-docs",slug:"/lambda-docs/code-setup",permalink:"/DEVWKS-2845/lambda-docs/code-setup",draft:!1,editUrl:"https://cisco.com/docs/lambda-docs/code-setup.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Create the Lambda Function",permalink:"/DEVWKS-2845/lambda-docs/create-lambda"},next:{title:"Functions Explanation",permalink:"/DEVWKS-2845/lambda-docs/function-explanation"}},d={},c=[{value:"Create environment variable",id:"create-environment-variable",level:2},{value:"Local code setup",id:"local-code-setup",level:2}],p={toc:c};function s(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"function-code-setup"},"Function Code Setup"),(0,o.kt)("p",null,"After the lambda function has been created it should take you to a page that is similar to the below image:\n",(0,o.kt)("img",{alt:"Created Function",src:n(3087).Z,width:"1866",height:"1118"})),(0,o.kt)("p",null,"For our code to work later on in this workshop, we need to create an environment variable from the Meraki API key we obtained earlier in this workshop."),(0,o.kt)("h2",{id:"create-environment-variable"},"Create environment variable"),(0,o.kt)("p",null,"To create our environment variable, we need to select the ",(0,o.kt)("strong",{parentName:"p"},"Configuration")," tab underneath ",(0,o.kt)("strong",{parentName:"p"},"Function overview"),".  Once there, there will be an ",(0,o.kt)("strong",{parentName:"p"},"Environment variables")," tab on the left side. It should look similar to this image:\n",(0,o.kt)("img",{alt:"Environment tab",src:n(666).Z,width:"2056",height:"840"})),(0,o.kt)("p",null,"Select the ",(0,o.kt)("strong",{parentName:"p"},"Environment variables")," tab and then ",(0,o.kt)("strong",{parentName:"p"},"Edit")," it.  Click on ",(0,o.kt)("strong",{parentName:"p"},"Add environment variable"),". Name the ",(0,o.kt)("inlineCode",{parentName:"p"},"key")," ",(0,o.kt)("inlineCode",{parentName:"p"},"XCiscoMerakiAPIKey"),".  Then enter your Meraki API key as the ",(0,o.kt)("inlineCode",{parentName:"p"},"Value"),". Then ",(0,o.kt)("strong",{parentName:"p"},"Save")," the configuration on the bottom right. It will look similar to this image except your ",(0,o.kt)("inlineCode",{parentName:"p"},"Value")," will have somethign there:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Environment variable",src:n(7551).Z,width:"1728",height:"948"})),(0,o.kt)("p",null,"Lets finish the local code setup now."),(0,o.kt)("h2",{id:"local-code-setup"},"Local code setup"),(0,o.kt)("p",null,"There a few ways to code a Lambda function. The list below will list a few and the way we will be coding it will be bolded:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Lambda Code Source Editor"),(0,o.kt)("li",{parentName:"ul"},"Containerized Deployment"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Zip archive deployment"))),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"The ",(0,o.kt)("inlineCode",{parentName:"p"},"Lambda Code Source Editor")," has some limitations.  If you require additional libraries that are not provided by AWS, then using a ",(0,o.kt)("inlineCode",{parentName:"p"},"Containerized")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"Zip")," deployment will allow use of those libraries.")),(0,o.kt)("p",null,"Since we will be using the ",(0,o.kt)("inlineCode",{parentName:"p"},"Zip")," option for creating the Lambda code.  We will need to create a local folder that will contain our code.  On your computer please create a new folder named ",(0,o.kt)("strong",{parentName:"p"},"shutdownPort")," using your preferred method (CLI or GUI)."),(0,o.kt)("p",null,"Open this folder in Visual Studio Code."),(0,o.kt)("p",null,"Back in the AWS Lambda function, copy the code from the ",(0,o.kt)("strong",{parentName:"p"},"Code Source")," editor. Here is an example of where it is:\n",(0,o.kt)("img",{alt:"Code Source Editor",src:n(3709).Z,width:"1534",height:"850"})),(0,o.kt)("p",null,"In the local code editor, create a new file called ",(0,o.kt)("inlineCode",{parentName:"p"},"lambda_handler.py")," and paste the code from the Lambda function into it."),(0,o.kt)("p",null,"There should now be a file with the below code in the ",(0,o.kt)("inlineCode",{parentName:"p"},"shutdownPort")," folder."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="lambda_function.py showLineNumbers"',title:'"lambda_function.py','showLineNumbers"':!0},"import json\n\ndef lambda_handler(event, context):\n    # TODO implement\n    return {\n        'statusCode': 200,\n        'body': json.dumps('Hello from Lambda!')\n    }\n")))}s.isMDXComponent=!0},3709:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/code-source-editor-aa1f2676d3d1cc5bd8529c7f47a2fd49.png"},3087:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/created-function-264925d8acc414e53ecb463e86bacc1b.png"},7551:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/edit-environ-c9614f2bf01a3fcdf6502b9c2240eb64.png"},666:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/env-tab-f0f72a7cdd3408ab225f4dfb1a1b1135.png"}}]);