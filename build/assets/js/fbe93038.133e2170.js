"use strict";(self.webpackChunklambda_docs=self.webpackChunklambda_docs||[]).push([[432],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),h=a,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||r;return n?o.createElement(m,i(i({ref:t},c),{},{components:n})):o.createElement(m,i({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:a,i[1]=s;for(var p=2;p<r;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},4534:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var o=n(7462),a=(n(7294),n(3905));const r={sidebar_position:4},i="Testing the Deployment",s={unversionedId:"testing",id:"testing",title:"Testing the Deployment",description:"We have a few tests that we can perform to validate our deployment is going to work. We will check the Meraki Dashboard to validate that it can send webhooks to our API, then we will generate our own example to send, and finally we will have the Meraki Dashboard send a legitimate event to our API.",source:"@site/docs/testing.md",sourceDirName:".",slug:"/testing",permalink:"/DEVWKS-2845/testing",draft:!1,editUrl:"https://cisco.com/docs/testing.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"API Gateway",permalink:"/DEVWKS-2845/create-api-gateway"},next:{title:"Appendix",permalink:"/DEVWKS-2845/appendix"}},l={},p=[{value:"Test Meraki Webhook Test",id:"test-meraki-webhook-test",level:2},{value:"Test Using Postman",id:"test-using-postman",level:2},{value:"Live Event Test",id:"live-event-test",level:2}],c={toc:p};function d(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,o.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"testing-the-deployment"},"Testing the Deployment"),(0,a.kt)("p",null,"We have a few tests that we can perform to validate our deployment is going to work. We will check the Meraki Dashboard to validate that it can send webhooks to our API, then we will generate our own example to send, and finally we will have the Meraki Dashboard send a legitimate event to our API."),(0,a.kt)("h2",{id:"test-meraki-webhook-test"},"Test Meraki Webhook Test"),(0,a.kt)("p",null,"Within the Meraki Dashboard on the Alerts page where we just setup a new webhook, click on the ",(0,a.kt)("strong",{parentName:"p"},"Send test webhook")," button to verify that Meraki can successfully send a webhook."),(0,a.kt)("p",null,"After clicking on the button and waiting a little while, we should see a status of ",(0,a.kt)("inlineCode",{parentName:"p"},"delivered"),", like the below image shows:\n",(0,a.kt)("img",{alt:"delivered webhook",src:n(7449).Z,width:"2184",height:"470"})),(0,a.kt)("p",null,"Let's test this with our own payload."),(0,a.kt)("h2",{id:"test-using-postman"},"Test Using Postman"),(0,a.kt)("p",null,"Our payload will not shutdown a port but will show that we are receiving a response from our function successfully."),(0,a.kt)("p",null,"In Postman we need to change the request to a `POST`` and paste in our API endpoint as the URL."),(0,a.kt)("p",null,"The test body of our request will be:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": "0.1",\n  "sharedSecret": "",\n  "sentAt": "2023-01-13T19:57:07.307562Z",\n  "organizationId": "000000",\n  "organizationName": "EX net",\n  "organizationUrl": "https://n471.meraki.com/o/000000/manage/organization/overview",\n  "networkId": "N_00000000",\n  "networkName": "Ex net",\n  "networkUrl": "https://n471.meraki.com/ex_net/n/000000/manage/nodes/wired_status",\n  "networkTags": [],\n  "deviceSerial": "Q00P-0000-0003",\n  "deviceMac": "00:00:00:d7:14:83",\n  "deviceName": "Home MX",\n  "deviceUrl": "https://n471.meraki.com/ex_net/n/000000/manage/nodes/new_wired_status",\n  "deviceTags": [],\n  "deviceModel": "MX67W",\n  "alertId": "",\n  "alertType": "Switch port disconnected",\n  "alertTypeId": "port_connected",\n  "alertLevel": "warning",\n  "occurredAt": "2023-01-13T19:57:07.259607Z",\n  "alertData": {\n    "portNum": 2,\n    "description": "Switch port is down",\n    "status": "up",\n    "prevStatus": "100 Gbps",\n    "portDesc": "Corp Access"\n  }\n}\n')),(0,a.kt)("p",null,"The headers will be ",(0,a.kt)("inlineCode",{parentName:"p"},"Content-Type")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"Accept"),". Both will have a value of ",(0,a.kt)("inlineCode",{parentName:"p"},"application/json"),"."),(0,a.kt)("p",null,"We can now send the request. We should get back a ",(0,a.kt)("inlineCode",{parentName:"p"},"Not a downed port")," response.\n",(0,a.kt)("img",{alt:"not down port",src:n(5933).Z,width:"822",height:"238"})),(0,a.kt)("p",null,"Lastly we can test using an actual event."),(0,a.kt)("h2",{id:"live-event-test"},"Live Event Test"),(0,a.kt)("p",null,"In the Meraki Dashboard we need to shutdown a port that is connected to another active port. This will cause the port to go down. After five minutes we should receive the webhook and the Lambda function will return ",(0,a.kt)("inlineCode",{parentName:"p"},"Port shutdown"),"."))}d.isMDXComponent=!0},7449:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/delivered-webhook-be4658a2a9b65954e65735586c1ab065.png"},5933:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/response-ba6fcae92e0658f2c938fb0b51fc17b5.png"}}]);